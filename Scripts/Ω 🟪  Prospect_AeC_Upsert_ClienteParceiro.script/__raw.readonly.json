{
  "ssjsActivityId": "268b844d-0562-46d6-bac5-d7f0b8c06162",
  "name": "Prospect_AeC_Upsert_ClienteParceiro",
  "key": "e4fe7fd4-bf60-4e3e-bf9f-d8f0857b9a3d",
  "description": "",
  "script": "<script runat=\"server\">\nPlatform(\"Core\", \"2.0\");\nvar api = new Script.Util.WSProxy();\nvar urlToUpsert = 'https://brasilcap.my.salesforce.com/services/data/v52.0/composite/sobjects/HC_Relacao_Cliente_Parceiro__c/HC_CPF_CNPJ_Codigo_Parceiro_Unico__c';\nvar nameDE = 'Tb_Base_Prospect_OTC291_Online_Filtrada_AeC';\nvar idCampanha = '7016g000000FhMSAA0';\nvar attributeType = 'HC_Relacao_Cliente_Parceiro__c'; // Objeto para inserir\nvar BATCH_SIZE = 200; // 1 a 2500\n// Colocar como está o nome do campo no Data Extension (de) como atributo (esquerdo) e com qual nome deve ser enviado para o Service (para)\n// no lado direito como valor\nvar deparaCampos = {\n  \"Id_Conta\": \"HC_Cliente__c\",\n  \"CPF\": \"HC_CPF_CNPJ__c\",\n  \"Nome\": \"Name\",\n  \"Codigo_RNA\": \"HC_RNA__c\",\n  \"Faixa_Renda_Mensal\": \"HC_Faixa_de_Renda_Mensal__c\",\n  \"CPF_Codigo_Parceiro_Unico\": \"HC_CPF_CNPJ_Codigo_Parceiro_Unico__c\",\n  \"CPF_Codigo_Parceiro\": \"HC_CPF_CNPJ_Codigo_do_Parceiro__c\",\n  \"Tel_Residencial\": \"HC_Telefone_Outro__c\",\n  \"Dia_Prov\": \"Dia_do_Provento__c\"\n}\n\n// Usar caso haja valores para inserir carimbados (que não são variáveis de acordo com a base)\nvar valoresFixos = {\n  \"HC_Parceiro__c\": \"a0W6g000006R0MfEAK\", \n  \"HC_Tipo_de_Pessoa__c\": \"PF\", \n  \"HC_Classificacao__c\": \"Cliente Potencial\", \n  \"HC_Telefone_Principal__c\": \"Telefone Outro\", \n  \"HC_Origem__c\": \"CAP\", \n  \"HC_Id_Parceiro_Cap__c\": \"TCBB\" \n}\n\n// DE OTC291 filtrado\nvar campoIdNoDEParaAtualizar = 'Id_Cliente_Parceiro';\nvar campoPKNoDEParaAtualizar = 'CPF';\n\n// Formatar campos de data para formato YYYY-MM-DD\n// Usar lado direito no caso do objeto deparaCampos\n// var dateFieldsToFormat = [\n// ];\n\n// Aplicar um filtro para trazer do DE apenas linhas desejadas\nvar applyFilterRetrieve = true; // flag para usar o filtro \"filterRetrieveRows\"\n// Campo para atualizar o DE informando que um contato já teve a tentativa de disparo\n// Para caso o Script precise ser executado novamente\nvar flagEnvioParaService = 'Envio_Service_ClienteParceiro';\nvar filterRetrieveRows = {\n  LeftOperand:{\n    Property: flagEnvioParaService,\n    SimpleOperator: 'equals',\n    Value: false\n  },\n  LogicalOperator:\"AND\",\n  RightOperand:{\n    LeftOperand: {\n      Property: 'Row',\n      SimpleOperator: 'lessThan', \n      Value: 75000\n    },\n    LogicalOperator:\"AND\",\n    RightOperand:{\n      Property: 'Envio_Service_Contact',\n      SimpleOperator: 'equals', \n      Value: true\n    }\n  }\n}\n\n\neval(Platform.Function.TreatAsContent( Platform.Function.ContentBlockByID('56360') ));\n</script>",
  "categoryId": 1937,
  "createdDate": "2023-07-03T12:18:44.653",
  "modifiedDate": "2023-07-13T09:40:09.767"
}